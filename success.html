<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,user-scalable=yes,initial-scale = 1.0,maximum-scale = 2.0">
    <title data-nl-localizable="true">Subscription</title>
    <style type="text/css" media="all">
      * {
        box-sizing: border-box;
      }

      body {
        background-color: #DDD;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 12px;
        color: #999;
      }

      .section {
        background-color: #FFF;
      }

      .block {
        max-width: 610px;
        margin: 0 auto;
      }


      #wrap {
        margin: 0 auto;
        text-align: left;
      }

      /* header area */

      .header-text {
        font-size: 34px;
        line-height: 34px;
        color: #BBB;
        margin: 25px 25px 20px;
      }

      .header-title {
        float: left;
      }

      .header-subtitle {
        float: right;
        font-size:24px;
        line-height:24px;
        font-weight:300;
        color:#777777;
      }


      /* content */
      #content {
        font-size: 14px;
      }

      #content .info {
        padding: 25px 25px 20px;
      }


      /* footer */
      #footer {
        text-align: center;
        height: 20px;
      }

      #footer a {
        color: #368AD7;
      }

      .footer-row {
        margin: 10px 0;
      }


      .button {
        border-radius: 3px;
        color: white;
        padding: 1px;
        cursor:pointer;
        text-align: center;
        display: inline-block;
        background: #378AD8;
        background-image: linear-gradient(top, #348AD5, #378AD8);
        background-image: -webkit-linear-gradient(top, #348AD5, #378AD8);
        background-image: -moz-linear-gradient(top, #348AD5, #378AD8);
        background-image: -ms-linear-gradient(top, #348AD5, #378AD8);
        background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #348AD5), color-stop(100%, #378AD8));
        box-shadow: 0 1px 4px #AAA;
        margin: 35px 0 35px;
      }

      .button a {
        color: white;
        text-decoration: none;
        display: inline-block;
        padding: 10px;
      }

      .button-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .cru-button, .back-link {
        flex: 0 0 40%;
      }

      .uppercase {
        text-transform: uppercase;
      }

      .privacy {
        padding: 20px;
      }
      .privacy p {
        font-size: 0.7em;
      }

      @media screen and (max-width: 610px) {
        body, html {
          width: 100%;
          margin: 0 auto;
        }

        .banner {
          width: 100%;
        }

        .header-text {
          float: none;
          line-height: inherit;
        }
      }

      /* Custom */
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body onload="determineUpdatedSubscriptions()">
    <div id="wrap" class="block">
      <div id="header" class="radius section block">
        <div class="header-text header-title section">
          <span class="nl-dce-fragment nl-dce-done"
                data-nl-name="BrandingLogo"
                data-nl-label="Brand Logo (BrandingLogo)"
                data-nl-localizable="true"
                id="brandingLogo"
                contenteditable="false">
            Brand Logo
          </span>
        </div>
        <div class="header-text header-subtitle section"></div>
        <img src="/nms/img/contentModels/main_default.jpg"
             alt=""
             class="banner" />
      </div>
      <div id="content" class="radius section">
        <div class="info">
          <div>
            <div id="addedSubscriptions" class="hidden"></div>
            <div id="removedSubscriptions" class="hidden"></div>
            <span id="successfullySubscribed" class="hidden">
              Success! You have updated your preferences.
            </span>
            <span id="successfullySubscribedSubtext" class="hidden">
              The email preferences for
              <span class="nl-dce-done"
                    type="email"
                    id="email"
                    name="email"
                    data-nl-xpath="/context/profile/email"></span>
              have been changed.
            </span>
          </div>
          <div class="button-wrapper">
            <a href="#"
               class="uppercase back-link"
               data-nl-type="action"
               data-nl-format="datetime"
               data-nl-action="previous"
               onclick="location.href = document.referrer; return false;">Back to Edit Preferences</a>
            <div class="button uppercase cru-button">
              <a href="https://www.cru.org">Continue to cru.org</a>
            </div>
          </div>
        </div>
        <div class="privacy">
          <p>
            We are committed to protecting and appropriately handling private
            and personal information and take your privacy very seriously.
            Learn more by reading our
            <a href="https://www.cru.org/us/en/about/privacy.html">privacy policy</a>.
          </p>
          <p>
            Need to update your email address or other info? Call us at
            <a href="tel:8882787233">(888)278-7233</a>
            from 9:00 a.m. to 5:00 p.m. EST, Monday-Friday, or
            <a href="mailto:donation.services@cru.org">email us</a>.
          </p>
        </div>
      </div>
      <div id="footer" class="block">
        <div class="footer-row">
          <span data-nl-localizable="true" id="copyrightPart1">
            Copyright Â©
          </span>
          <span class="nl-dce-fragment nl-dce-done"
                data-nl-name="BrandingWebSiteLink"
                data-nl-localizable="true"
                id="brandingWebSiteLink"
                contenteditable="false">
            Link to the brand website
          </span>
          <span data-nl-localizable="true" id="copyrightPart2">
            All rights reserved.
          </span>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      function determineUpdatedSubscriptions() {
        if (sessionStorage) {
          let addedSubscriptions =
            sessionStorage.getItem('addedSubscriptions') || '';
          if (addedSubscriptions) {
            unhideElement('addedSubscriptions');
            document.getElementById('addedSubscriptions').textContent =
              'You have successfully subscribed to the following services: ' +
                JSON.parse(addedSubscriptions);
          }

          let removedSubscriptions =
            sessionStorage.getItem('removedSubscriptions') || '';
          if (removedSubscriptions) {
            unhideElement('removedSubscriptions');
            document.getElementById('removedSubscriptions').textContent =
              'You have successfully unsubscribed to the following services: ' +
                JSON.parse(removedSubscriptions);
          }

          sessionStorage.removeItem('addedSubscriptions');
          sessionStorage.removeItem('removedSubscriptions');
        } else {
          unhideElement('successfullySubscribed');
          unhideElement('successfullySubscribedSubtext');
        }
      }

      function unhideElement(id) {
        let element = document.getElementById(id);

        if (element.classList) {
          element.classList.toggle('hidden');
        } else {
          // For IE9
          const classes = element.className.split(' ');
          const i = classes.indexOf('hidden');

          if (i >= 0) {
            classes.splice(i, 1);
          } else {
            classes.push('hidden');
            element.className = classes.join(' ');
          }
        }
      }
    </script>
  </body>
</html>
